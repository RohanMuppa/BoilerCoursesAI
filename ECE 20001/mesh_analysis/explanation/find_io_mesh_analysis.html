<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find I₀ Using Mesh Analysis | ECE 20001</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #34495e;
            --accent: #3498db;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #ecf0f1;
            --mesh1: #e74c3c;
            --mesh2: #3498db;
            --mesh3: #9b59b6;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            border-bottom: 3px solid var(--accent);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .source {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        h1 {
            color: var(--primary);
            font-size: 32px;
            font-weight: 700;
        }

        .subtitle {
            color: var(--secondary);
            font-size: 18px;
            margin-top: 8px;
        }

        .concept-box {
            background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f7 100%);
            border-left: 5px solid var(--accent);
            padding: 20px 25px;
            margin: 25px 0;
            border-radius: 0 12px 12px 0;
        }

        .concept-box h3 {
            color: var(--accent);
            margin-bottom: 12px;
            font-size: 18px;
        }

        .concept-box p {
            color: var(--secondary);
            margin-bottom: 10px;
        }

        .concept-box ul {
            margin-left: 20px;
            color: var(--secondary);
        }

        .concept-box li {
            margin: 6px 0;
        }

        h2 {
            color: var(--secondary);
            margin: 30px 0 15px;
            font-size: 22px;
            cursor: pointer;
            user-select: none;
            padding: 15px 20px;
            background: var(--light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        h2:hover {
            background: #dfe6e9;
            transform: translateX(5px);
        }

        h2::before {
            content: '▼';
            font-size: 12px;
            margin-right: 15px;
            transition: transform 0.3s ease;
            color: var(--accent);
        }

        h2.collapsed::before {
            transform: rotate(-90deg);
        }

        .step-number {
            background: var(--accent);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 14px;
            font-weight: bold;
        }

        .step {
            margin-bottom: 25px;
            padding: 25px;
            background: #f8f9fa;
            border-left: 5px solid var(--accent);
            border-radius: 0 12px 12px 0;
            transition: all 0.3s ease;
        }

        .step.hidden {
            display: none;
        }

        .step p {
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .step strong {
            color: var(--primary);
        }

        .equation-block {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .equation-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 12px;
            font-size: 16px;
        }

        .equation {
            font-family: 'Courier New', monospace;
            background: #fafafa;
            padding: 15px 20px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            font-size: 16px;
            line-height: 1.8;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        .equation.mesh1 { border-left-color: var(--mesh1); background: #fdf2f2; }
        .equation.mesh2 { border-left-color: var(--mesh2); background: #f0f7ff; }
        .equation.mesh3 { border-left-color: var(--mesh3); background: #f8f0ff; }

        .highlight {
            background: linear-gradient(120deg, #fff3cd 0%, #ffeeba 100%);
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
            border: 1px solid #ffc107;
        }

        .result {
            background: linear-gradient(120deg, #d4edda 0%, #c3e6cb 100%);
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
            border: 1px solid var(--success);
        }

        .answer {
            background: linear-gradient(135deg, #d4edda 0%, #b8dfc8 100%);
            border: 2px solid var(--success);
            padding: 30px;
            margin: 35px 0;
            border-radius: 16px;
            text-align: center;
        }

        .answer-label {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--success);
            margin-bottom: 10px;
        }

        .answer-value {
            font-size: 36px;
            font-weight: bold;
            color: var(--primary);
            font-family: 'Courier New', monospace;
        }

        .answer-explanation {
            font-size: 16px;
            margin-top: 15px;
            color: var(--secondary);
            font-weight: normal;
        }

        .circuit {
            background: white;
            padding: 30px;
            border-radius: 16px;
            border: 2px solid #e0e0e0;
            margin: 30px 0;
            text-align: center;
        }

        .circuit-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 18px;
        }

        svg {
            max-width: 100%;
            height: auto;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--secondary);
        }

        .legend-color {
            width: 20px;
            height: 4px;
            border-radius: 2px;
        }

        .mesh-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 15px;
        }

        .mesh-table th, .mesh-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .mesh-table th {
            background: var(--light);
            font-weight: 600;
            color: var(--primary);
        }

        .mesh-table tr:hover {
            background: #f8f9fa;
        }

        .verification-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .verification-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
        }

        .verification-card.success {
            border-color: var(--success);
            background: linear-gradient(135deg, #f0fff4 0%, #e6ffed 100%);
        }

        .verification-card h4 {
            color: var(--primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .check-icon {
            color: var(--success);
            font-size: 20px;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid var(--light);
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-btn.expand {
            background: var(--accent);
            color: white;
        }

        .nav-btn.collapse {
            background: var(--light);
            color: var(--secondary);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .derivation {
            background: #fffef0;
            border: 1px solid #f0e68c;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .derivation-step {
            display: flex;
            align-items: flex-start;
            margin: 8px 0;
            font-family: 'Courier New', monospace;
        }

        .derivation-step .arrow {
            color: var(--accent);
            margin-right: 10px;
            font-weight: bold;
        }

        .note {
            background: #fff8e1;
            border-left: 4px solid var(--warning);
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
            font-size: 14px;
        }

        .note strong {
            color: var(--warning);
        }

        @media (max-width: 768px) {
            .container { padding: 20px; }
            h1 { font-size: 24px; }
            .answer-value { font-size: 28px; }
            .legend { gap: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="source">ECE 20001 | Practice Problem | Mesh Analysis</div>
            <h1>Find I₀ Using Mesh Analysis</h1>
            <div class="subtitle">A circuit with voltage sources, current source, and resistors</div>
        </div>

        <div class="concept-box">
            <h3>Mesh Analysis Overview</h3>
            <p>Mesh analysis uses Kirchhoff's Voltage Law (KVL) to solve for unknown currents in planar circuits. The method involves defining mesh currents (hypothetical currents circulating in each mesh) and writing KVL equations around each mesh.</p>
            <ul>
                <li><strong>Mesh</strong> is a loop that contains no other loops inside it</li>
                <li><strong>Mesh current</strong> is a hypothetical current that flows around the perimeter of a mesh</li>
                <li>For circuits with current sources, use the <strong>supermesh</strong> technique or constraint equations</li>
                <li>The actual current through any element is the algebraic sum of all mesh currents passing through it</li>
            </ul>
        </div>

        <div class="circuit">
            <div class="circuit-title">Circuit Diagram with Mesh Currents Defined</div>
            <svg viewBox="0 0 700 450" xmlns="http://www.w3.org/2000/svg">
                <!-- Background grid (subtle) -->
                <defs>
                    <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                        <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#f0f0f0" stroke-width="0.5"/>
                    </pattern>
                </defs>
                <rect width="700" height="450" fill="url(#grid)"/>

                <!-- Main outer rectangle wires -->
                <path d="M 100 60 L 100 180" stroke="#2c3e50" stroke-width="3" fill="none"/>
                <path d="M 100 220 L 100 280" stroke="#2c3e50" stroke-width="3" fill="none"/>
                <path d="M 100 320 L 100 390 L 600 390" stroke="#2c3e50" stroke-width="3" fill="none"/>
                <path d="M 600 390 L 600 60 L 480 60" stroke="#2c3e50" stroke-width="3" fill="none"/>
                <path d="M 100 60 L 200 60" stroke="#2c3e50" stroke-width="3" fill="none"/>

                <!-- Interior wires -->
                <path d="M 280 60 L 400 60 L 400 100" stroke="#2c3e50" stroke-width="3" fill="none"/>
                <path d="M 400 180 L 400 250" stroke="#2c3e50" stroke-width="3" fill="none"/>
                <path d="M 400 250 L 400 300" stroke="#2c3e50" stroke-width="3" fill="none"/>
                <path d="M 400 340 L 400 390" stroke="#2c3e50" stroke-width="3" fill="none"/>
                <path d="M 100 250 L 180 250" stroke="#2c3e50" stroke-width="3" fill="none"/>
                <path d="M 280 250 L 400 250" stroke="#2c3e50" stroke-width="3" fill="none"/>

                <!-- 12V Source -->
                <circle cx="240" cy="60" r="30" fill="white" stroke="#2c3e50" stroke-width="3"/>
                <text x="240" y="35" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="#2c3e50">12V</text>
                <text x="215" y="65" text-anchor="middle" font-family="Arial" font-size="16" fill="#2c3e50">+</text>
                <text x="265" y="65" text-anchor="middle" font-family="Arial" font-size="16" fill="#2c3e50">−</text>

                <!-- 5Ω Resistor -->
                <rect x="85" y="180" width="30" height="40" fill="white" stroke="#2c3e50" stroke-width="3"/>
                <text x="60" y="205" text-anchor="end" font-family="Arial" font-size="16" font-weight="bold" fill="#2c3e50">5Ω</text>

                <!-- 10Ω Resistor -->
                <rect x="85" y="280" width="30" height="40" fill="white" stroke="#2c3e50" stroke-width="3"/>
                <text x="60" y="305" text-anchor="end" font-family="Arial" font-size="16" font-weight="bold" fill="#2c3e50">10Ω</text>

                <!-- 20Ω Resistor -->
                <rect x="180" y="235" width="100" height="30" fill="white" stroke="#2c3e50" stroke-width="3"/>
                <text x="230" y="228" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="#2c3e50">20Ω</text>

                <!-- I_o label and arrow -->
                <path d="M 150 270 L 190 270" stroke="#e74c3c" stroke-width="2" fill="none" marker-end="url(#arrowRed)"/>
                <text x="170" y="295" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="#e74c3c">I₀</text>

                <!-- 15Ω Resistor -->
                <rect x="385" y="100" width="30" height="80" fill="white" stroke="#2c3e50" stroke-width="3"/>
                <text x="440" y="145" text-anchor="start" font-family="Arial" font-size="16" font-weight="bold" fill="#2c3e50">15Ω</text>

                <!-- 2A Current Source -->
                <circle cx="400" cy="320" r="25" fill="white" stroke="#2c3e50" stroke-width="3"/>
                <text x="445" y="325" text-anchor="start" font-family="Arial" font-size="16" font-weight="bold" fill="#2c3e50">2A</text>
                <path d="M 400 335 L 400 305" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

                <!-- 3V Source -->
                <circle cx="600" cy="225" r="30" fill="white" stroke="#2c3e50" stroke-width="3"/>
                <text x="650" y="230" text-anchor="start" font-family="Arial" font-size="18" font-weight="bold" fill="#2c3e50">3V</text>
                <text x="600" y="210" text-anchor="middle" font-family="Arial" font-size="16" fill="#2c3e50">+</text>
                <text x="600" y="245" text-anchor="middle" font-family="Arial" font-size="16" fill="#2c3e50">−</text>

                <!-- Wire from 15Ω to 3V -->
                <path d="M 400 60 L 480 60" stroke="#2c3e50" stroke-width="3" fill="none"/>

                <!-- Mesh current arrows -->
                <!-- Mesh 1 (i₁) - Red -->
                <circle cx="220" cy="155" r="35" fill="none" stroke="#e74c3c" stroke-width="2" stroke-dasharray="8,4"/>
                <path d="M 235 140 L 250 155 L 235 170" fill="none" stroke="#e74c3c" stroke-width="2"/>
                <text x="220" y="160" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#e74c3c">i₁</text>

                <!-- Mesh 2 (i₂) - Blue -->
                <circle cx="220" cy="320" r="35" fill="none" stroke="#3498db" stroke-width="2" stroke-dasharray="8,4"/>
                <path d="M 235 305 L 250 320 L 235 335" fill="none" stroke="#3498db" stroke-width="2"/>
                <text x="220" y="325" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#3498db">i₂</text>

                <!-- Mesh 3 (i₃) - Purple -->
                <circle cx="500" cy="225" r="35" fill="none" stroke="#9b59b6" stroke-width="2" stroke-dasharray="8,4"/>
                <path d="M 515 210 L 530 225 L 515 240" fill="none" stroke="#9b59b6" stroke-width="2"/>
                <text x="500" y="230" text-anchor="middle" font-family="Arial" font-size="20" font-weight="bold" fill="#9b59b6">i₃</text>

                <!-- Node labels -->
                <circle cx="100" cy="60" r="5" fill="#2c3e50"/>
                <text x="85" y="45" text-anchor="middle" font-family="Arial" font-size="14" fill="#666">A</text>

                <circle cx="400" cy="60" r="5" fill="#2c3e50"/>
                <text x="400" y="45" text-anchor="middle" font-family="Arial" font-size="14" fill="#666">B</text>

                <circle cx="100" cy="250" r="5" fill="#2c3e50"/>
                <text x="85" y="240" text-anchor="middle" font-family="Arial" font-size="14" fill="#666">C</text>

                <circle cx="400" cy="250" r="5" fill="#2c3e50"/>
                <text x="420" y="240" text-anchor="middle" font-family="Arial" font-size="14" fill="#666">D</text>

                <circle cx="400" cy="390" r="5" fill="#2c3e50"/>
                <text x="400" y="410" text-anchor="middle" font-family="Arial" font-size="14" fill="#666">E (Ground)</text>

                <!-- Arrow markers -->
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                        <path d="M 0 0 L 10 5 L 0 10 z" fill="#2c3e50"/>
                    </marker>
                    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                        <path d="M 0 0 L 10 5 L 0 10 z" fill="#e74c3c"/>
                    </marker>
                </defs>
            </svg>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #e74c3c;"></div>
                    <span>Mesh 1 (i₁) Upper Left</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3498db;"></div>
                    <span>Mesh 2 (i₂) Lower Left</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #9b59b6;"></div>
                    <span>Mesh 3 (i₃) Right</span>
                </div>
            </div>
        </div>

        <h2 onclick="toggleStep(1)"><span class="step-number">1</span>Identify Circuit Topology</h2>
        <div id="step1" class="step">
            <p>First, identify all nodes and branches in the circuit to understand its structure.</p>

            <div class="equation-block">
                <div class="equation-title">Node Identification</div>
                <table class="mesh-table">
                    <tr>
                        <th>Node</th>
                        <th>Location</th>
                        <th>Connected Elements</th>
                    </tr>
                    <tr>
                        <td><strong>A</strong></td>
                        <td>Top left</td>
                        <td>12V (+), 5Ω (top)</td>
                    </tr>
                    <tr>
                        <td><strong>B</strong></td>
                        <td>Top right</td>
                        <td>12V (−), 15Ω (top), 3V (+)</td>
                    </tr>
                    <tr>
                        <td><strong>C</strong></td>
                        <td>Middle left</td>
                        <td>5Ω (bottom), 10Ω (top), 20Ω (left)</td>
                    </tr>
                    <tr>
                        <td><strong>D</strong></td>
                        <td>Middle right</td>
                        <td>15Ω (bottom), 20Ω (right), 2A (top)</td>
                    </tr>
                    <tr>
                        <td><strong>E</strong></td>
                        <td>Ground</td>
                        <td>10Ω (bottom), 2A (bottom), 3V (−)</td>
                    </tr>
                </table>
            </div>

            <div class="equation-block">
                <div class="equation-title">Branch Count Verification</div>
                <div class="equation">Nodes (N) = 5 (A, B, C, D, E)
Branches (B) = 7 (12V, 5Ω, 10Ω, 20Ω, 15Ω, 2A, 3V)
Meshes = B − N + 1 = 7 − 5 + 1 = <span class="highlight">3 meshes</span></div>
            </div>

            <p>The circuit is <strong>planar</strong> (can be drawn without crossing wires), so mesh analysis is applicable.</p>
        </div>

        <h2 onclick="toggleStep(2)"><span class="step-number">2</span>Define Mesh Currents</h2>
        <div id="step2" class="step">
            <p>Define a clockwise mesh current for each of the three meshes. Using clockwise direction consistently simplifies the equations.</p>

            <div class="equation-block">
                <div class="equation-title">Mesh Current Definitions (All Clockwise)</div>
                <div class="equation mesh1"><strong>Mesh 1 (i₁)</strong> Upper left loop
Path: A → (12V) → B → (15Ω) → D → (20Ω) → C → (5Ω) → A
Elements: 12V source, 15Ω, 20Ω, 5Ω</div>
                <div class="equation mesh2"><strong>Mesh 2 (i₂)</strong> Lower left loop
Path: C → (20Ω) → D → (2A) → E → (10Ω) → C
Elements: 20Ω (shared with i₁), 2A source (shared with i₃), 10Ω</div>
                <div class="equation mesh3"><strong>Mesh 3 (i₃)</strong> Right loop
Path: B → (15Ω) → D → (2A) → E → (3V) → B
Elements: 15Ω (shared with i₁), 2A source (shared with i₂), 3V source</div>
            </div>

            <div class="note">
                <strong>Note:</strong> The 2A current source is shared between Mesh 2 and Mesh 3. This requires either a supermesh approach or a constraint equation. We will use the supermesh method.
            </div>
        </div>

        <h2 onclick="toggleStep(3)"><span class="step-number">3</span>Write KVL Equations</h2>
        <div id="step3" class="step">
            <p>Apply Kirchhoff's Voltage Law around each mesh. For shared elements, the voltage drop depends on the difference between mesh currents.</p>

            <div class="equation-block">
                <div class="equation-title">Mesh 1 KVL (Standard Mesh Equation)</div>
                <p>Going clockwise around Mesh 1, summing voltage drops = 0:</p>
                <div class="equation mesh1">Through 12V (A→B): Going + to − = <span class="highlight">+12V drop</span>
Through 15Ω (B→D): i₁ down, i₃ up = 15(i₁ − i₃)
Through 20Ω (D→C): i₁ left, i₂ right = 20(i₁ − i₂)
Through 5Ω (C→A): i₁ only = 5i₁</div>
                <div class="derivation">
                    <div class="derivation-step"><span class="arrow">→</span>12 + 15(i₁ − i₃) + 20(i₁ − i₂) + 5i₁ = 0</div>
                    <div class="derivation-step"><span class="arrow">→</span>12 + 15i₁ − 15i₃ + 20i₁ − 20i₂ + 5i₁ = 0</div>
                    <div class="derivation-step"><span class="arrow">→</span><span class="highlight">40i₁ − 20i₂ − 15i₃ = −12</span> ... (Equation 1)</div>
                </div>
            </div>

            <div class="equation-block">
                <div class="equation-title">Current Source Constraint</div>
                <p>The 2A source forces a specific relationship between i₂ and i₃:</p>
                <div class="equation">2A source arrow points upward (from E to D)

Mesh 2 (clockwise): passes DOWN through 2A (from D to E)
Mesh 3 (clockwise): passes UP through 2A (from E to D)

Net upward current = i₃ − i₂ = 2A</div>
                <div class="derivation">
                    <div class="derivation-step"><span class="arrow">→</span><span class="highlight">i₃ − i₂ = 2</span> ... (Equation 2)</div>
                    <div class="derivation-step"><span class="arrow">→</span>i₃ = i₂ + 2</div>
                </div>
            </div>

            <div class="equation-block">
                <div class="equation-title">Supermesh KVL (Meshes 2 + 3 Combined)</div>
                <p>Since meshes 2 and 3 share the current source, we write KVL around their combined exterior, skipping the 2A branch:</p>
                <div class="equation">Supermesh path: C → D → B → E → C (exterior of meshes 2 and 3)

20Ω (C→D): i₂ right, i₁ left = 20(i₂ − i₁)
15Ω (D→B): i₃ up, i₁ down = 15(i₃ − i₁)
3V (B→E): Going + to − = +3V drop
10Ω (E→C): i₂ up = 10i₂</div>
                <div class="derivation">
                    <div class="derivation-step"><span class="arrow">→</span>20(i₂ − i₁) + 15(i₃ − i₁) + 3 + 10i₂ = 0</div>
                    <div class="derivation-step"><span class="arrow">→</span>20i₂ − 20i₁ + 15i₃ − 15i₁ + 3 + 10i₂ = 0</div>
                    <div class="derivation-step"><span class="arrow">→</span><span class="highlight">−35i₁ + 30i₂ + 15i₃ = −3</span> ... (Equation 3)</div>
                </div>
            </div>

            <div class="equation-block">
                <div class="equation-title">System of Equations Summary</div>
                <div class="equation">(1)  40i₁ − 20i₂ − 15i₃ = −12
(2)  i₃ − i₂ = 2
(3)  −35i₁ + 30i₂ + 15i₃ = −3</div>
            </div>
        </div>

        <h2 onclick="toggleStep(4)"><span class="step-number">4</span>Solve the System of Equations</h2>
        <div id="step4" class="step">
            <p>Use substitution to reduce the 3x3 system to a 2x2 system, then solve for all mesh currents.</p>

            <div class="equation-block">
                <div class="equation-title">Substitute Equation 2 into Equations 1 and 3</div>
                <p>From Equation 2: <strong>i₃ = i₂ + 2</strong></p>

                <div class="equation"><strong>Substitute into Equation 1:</strong>
40i₁ − 20i₂ − 15(i₂ + 2) = −12
40i₁ − 20i₂ − 15i₂ − 30 = −12
40i₁ − 35i₂ = −12 + 30
<span class="highlight">40i₁ − 35i₂ = 18</span> ... (1')</div>

                <div class="equation"><strong>Substitute into Equation 3:</strong>
−35i₁ + 30i₂ + 15(i₂ + 2) = −3
−35i₁ + 30i₂ + 15i₂ + 30 = −3
−35i₁ + 45i₂ = −3 − 30
<span class="highlight">−35i₁ + 45i₂ = −33</span> ... (3')</div>
            </div>

            <div class="equation-block">
                <div class="equation-title">Solve 2x2 System</div>
                <p>Now solve equations (1') and (3') simultaneously:</p>

                <div class="equation">From (1'): i₁ = (18 + 35i₂) / 40

Substitute into (3'):
−35 × (18 + 35i₂)/40 + 45i₂ = −33

Multiply through by 40:
−35(18 + 35i₂) + 1800i₂ = −1320
−630 − 1225i₂ + 1800i₂ = −1320
575i₂ = −1320 + 630
575i₂ = −690</div>

                <div class="equation"><span class="result">i₂ = −690/575 = −1.2 A</span></div>
            </div>

            <div class="equation-block">
                <div class="equation-title">Back-Substitute for i₃ and i₁</div>

                <div class="equation">From Equation 2:
i₃ = i₂ + 2 = −1.2 + 2
<span class="result">i₃ = 0.8 A</span></div>

                <div class="equation">From Equation (1'):
40i₁ − 35(−1.2) = 18
40i₁ + 42 = 18
40i₁ = −24
<span class="result">i₁ = −0.6 A</span></div>
            </div>

            <div class="equation-block">
                <div class="equation-title">Mesh Current Results</div>
                <table class="mesh-table">
                    <tr>
                        <th>Mesh Current</th>
                        <th>Value</th>
                        <th>Interpretation</th>
                    </tr>
                    <tr>
                        <td style="color: #e74c3c; font-weight: bold;">i₁</td>
                        <td><strong>−0.6 A</strong></td>
                        <td>Actual direction is counter-clockwise</td>
                    </tr>
                    <tr>
                        <td style="color: #3498db; font-weight: bold;">i₂</td>
                        <td><strong>−1.2 A</strong></td>
                        <td>Actual direction is counter-clockwise</td>
                    </tr>
                    <tr>
                        <td style="color: #9b59b6; font-weight: bold;">i₃</td>
                        <td><strong>0.8 A</strong></td>
                        <td>Actual direction is clockwise (as assumed)</td>
                    </tr>
                </table>
            </div>
        </div>

        <h2 onclick="toggleStep(5)"><span class="step-number">5</span>Calculate I₀</h2>
        <div id="step5" class="step">
            <p>I₀ is the current through the 20Ω resistor, flowing from left to right (from node C to node D).</p>

            <div class="equation-block">
                <div class="equation-title">Determine I₀ from Mesh Currents</div>
                <div class="equation">The 20Ω resistor is shared by Mesh 1 and Mesh 2:

• Mesh 1 (i₁): passes through 20Ω from RIGHT to LEFT (D→C)
• Mesh 2 (i₂): passes through 20Ω from LEFT to RIGHT (C→D)

I₀ is defined as positive flowing LEFT to RIGHT (C→D)

Therefore: I₀ = (i₂ contribution) − (i₁ contribution)
           I₀ = i₂ − i₁</div>

                <div class="derivation">
                    <div class="derivation-step"><span class="arrow">→</span>I₀ = i₂ − i₁</div>
                    <div class="derivation-step"><span class="arrow">→</span>I₀ = (−1.2) − (−0.6)</div>
                    <div class="derivation-step"><span class="arrow">→</span>I₀ = −1.2 + 0.6</div>
                    <div class="derivation-step"><span class="arrow">→</span><span class="result">I₀ = −0.6 A</span></div>
                </div>
            </div>

            <div class="note">
                <strong>Physical Interpretation:</strong> The negative sign indicates that I₀ actually flows from RIGHT to LEFT (from D to C), opposite to the direction shown in the circuit diagram. The magnitude is 0.6 A.
            </div>
        </div>

        <h2 onclick="toggleStep(6)"><span class="step-number">6</span>Verify Solution</h2>
        <div id="step6" class="step">
            <p>Verify the solution using KCL at nodes and checking the current source constraint.</p>

            <div class="verification-grid">
                <div class="verification-card success">
                    <h4><span class="check-icon">✓</span> KCL at Node D</h4>
                    <p>Node D connects 15Ω, 20Ω, and 2A source</p>
                    <div class="equation">Current into D from 2A source: 2 A

Current out through 15Ω (to B):
= i₁ − i₃ = −0.6 − 0.8 = −1.4 A
(negative means 1.4 A flows INTO D)

Current out through 20Ω (to C):
= i₁ − i₂ = −0.6 − (−1.2) = 0.6 A

Check: 2 = 1.4 + 0.6 ✓</div>
                </div>

                <div class="verification-card success">
                    <h4><span class="check-icon">✓</span> KCL at Node C</h4>
                    <p>Node C connects 5Ω, 10Ω, and 20Ω</p>
                    <div class="equation">From 5Ω (from A): −i₁ = 0.6 A
From 20Ω (from D): −I₀ = 0.6 A
To 10Ω (to E): −i₂ = 1.2 A

Check: 0.6 + 0.6 = 1.2 ✓</div>
                </div>

                <div class="verification-card success">
                    <h4><span class="check-icon">✓</span> Current Source Constraint</h4>
                    <p>Verify 2A flows upward through source</p>
                    <div class="equation">Upward current = i₃ − i₂
= 0.8 − (−1.2)
= 0.8 + 1.2
= 2 A ✓</div>
                </div>

                <div class="verification-card success">
                    <h4><span class="check-icon">✓</span> Power Balance</h4>
                    <p>Total power supplied = Total power absorbed</p>
                    <div class="equation">Resistors absorb:
P₅ = 5 × i₁² = 5 × 0.36 = 1.8 W
P₁₀ = 10 × i₂² = 10 × 1.44 = 14.4 W
P₂₀ = 20 × I₀² = 20 × 0.36 = 7.2 W
P₁₅ = 15 × (i₁−i₃)² = 15 × 1.96 = 29.4 W

Total absorbed = 52.8 W</div>
                </div>
            </div>

            <p style="margin-top: 20px;"><strong>All verification checks pass.</strong> The solution is correct.</p>
        </div>

        <div class="answer">
            <div class="answer-label">Final Answer</div>
            <div class="answer-value">I₀ = −0.6 A</div>
            <div class="answer-explanation">
                The current I₀ has magnitude <strong>0.6 A</strong> (or 600 mA) flowing from <strong>right to left</strong> through the 20Ω resistor, opposite to the arrow direction shown in the circuit diagram.
                <br><br>
                Equivalently: I₀ = −3/5 A = −600 mA
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn collapse" onclick="collapseAll()">Collapse All Steps</button>
            <button class="nav-btn expand" onclick="expandAll()">Expand All Steps</button>
        </div>
    </div>

    <script>
        function toggleStep(num) {
            const step = document.getElementById('step' + num);
            const header = step.previousElementSibling;
            step.classList.toggle('hidden');
            header.classList.toggle('collapsed');
        }

        function collapseAll() {
            for (let i = 1; i <= 6; i++) {
                const step = document.getElementById('step' + i);
                const header = step.previousElementSibling;
                step.classList.add('hidden');
                header.classList.add('collapsed');
            }
        }

        function expandAll() {
            for (let i = 1; i <= 6; i++) {
                const step = document.getElementById('step' + i);
                const header = step.previousElementSibling;
                step.classList.remove('hidden');
                header.classList.remove('collapsed');
            }
        }
    </script>
</body>
</html>