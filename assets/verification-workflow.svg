<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <defs>
    <linearGradient id="phase0" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6366F1"/>
      <stop offset="100%" style="stop-color:#4F46E5"/>
    </linearGradient>
    <linearGradient id="phase1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6"/>
      <stop offset="100%" style="stop-color:#7C3AED"/>
    </linearGradient>
    <linearGradient id="phase2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EC4899"/>
      <stop offset="100%" style="stop-color:#DB2777"/>
    </linearGradient>
    <linearGradient id="phase3" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B"/>
      <stop offset="100%" style="stop-color:#D97706"/>
    </linearGradient>
    <linearGradient id="phase4" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <filter id="shadow2" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.12"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="500" fill="#f8fafc"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="22" font-weight="700" fill="#1e293b">Multi-Agent Verification Workflow</text>
  <text x="450" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#64748b">ECE 20001 Circuit Analysis Pipeline</text>

  <!-- Phase 0: Image Parsing -->
  <rect x="30" y="85" width="160" height="120" rx="10" fill="url(#phase0)" filter="url(#shadow2)"/>
  <text x="110" y="110" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="700" fill="rgba(255,255,255,0.7)">PHASE 0</text>
  <text x="110" y="130" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="white">Image Parsing</text>
  <text x="110" y="155" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Circuit Parser</text>
  <text x="110" y="170" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Topology Verifier</text>
  <text x="110" y="190" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.6)">Parallel agents</text>

  <!-- Arrow -->
  <path d="M190 145 L220 145" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Phase 1: Problem Intake -->
  <rect x="230" y="85" width="160" height="120" rx="10" fill="url(#phase1)" filter="url(#shadow2)"/>
  <text x="310" y="110" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="700" fill="rgba(255,255,255,0.7)">PHASE 1</text>
  <text x="310" y="130" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="white">Problem Intake</text>
  <text x="310" y="155" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Problem Parser</text>
  <text x="310" y="170" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Textbook Method</text>
  <text x="310" y="190" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.6)">Parallel agents</text>

  <!-- Arrow -->
  <path d="M390 145 L420 145" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Phase 2: Solution -->
  <rect x="430" y="85" width="160" height="120" rx="10" fill="url(#phase2)" filter="url(#shadow2)"/>
  <text x="510" y="110" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="700" fill="rgba(255,255,255,0.7)">PHASE 2</text>
  <text x="510" y="130" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="white">Solution</text>
  <text x="510" y="155" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Code Solver</text>
  <text x="510" y="170" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">SymPy + Units</text>
  <text x="510" y="190" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.6)">Shows work immediately</text>

  <!-- Arrow -->
  <path d="M590 145 L620 145" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Phase 3: Verification -->
  <rect x="630" y="85" width="160" height="120" rx="10" fill="url(#phase3)" filter="url(#shadow2)"/>
  <text x="710" y="110" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="700" fill="rgba(255,255,255,0.7)">PHASE 3</text>
  <text x="710" y="130" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="white">Verification</text>
  <text x="710" y="150" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Units Checker</text>
  <text x="710" y="165" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Sanity Checker</text>
  <text x="710" y="180" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Method Verifier</text>
  <text x="710" y="195" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.6)">Background parallel</text>

  <!-- Arrow down to Phase 4 -->
  <path d="M710 205 L710 230 L850 230 L850 280" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Phase 4: Synthesis -->
  <rect x="770" y="290" width="120" height="90" rx="10" fill="url(#phase4)" filter="url(#shadow2)"/>
  <text x="830" y="315" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="700" fill="rgba(255,255,255,0.7)">PHASE 4</text>
  <text x="830" y="335" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="white">Synthesis</text>
  <text x="830" y="355" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Opus Agent</text>
  <text x="830" y="370" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.6)">Final answer</text>

  <!-- Error feedback loop -->
  <path d="M770 335 L650 335 L650 205" stroke="#EF4444" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrow)"/>
  <text x="700" y="325" font-family="system-ui, sans-serif" font-size="9" fill="#EF4444">Error? Rerun</text>

  <!-- Agent Details Section -->
  <rect x="30" y="250" width="200" height="220" rx="8" fill="white" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow2)"/>
  <text x="130" y="275" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#334155">Verification Checks</text>

  <circle cx="55" cy="300" r="6" fill="#10B981"/>
  <text x="70" y="304" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Units dimensional consistency</text>

  <circle cx="55" cy="325" r="6" fill="#10B981"/>
  <text x="70" y="329" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Physical reasonableness</text>

  <circle cx="55" cy="350" r="6" fill="#10B981"/>
  <text x="70" y="354" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Textbook methodology</text>

  <circle cx="55" cy="375" r="6" fill="#10B981"/>
  <text x="70" y="379" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Sign conventions</text>

  <circle cx="55" cy="400" r="6" fill="#10B981"/>
  <text x="70" y="404" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Arithmetic accuracy</text>

  <circle cx="55" cy="425" r="6" fill="#10B981"/>
  <text x="70" y="429" font-family="system-ui, sans-serif" font-size="10" fill="#475569">KCL/KVL compliance</text>

  <circle cx="55" cy="450" r="6" fill="#10B981"/>
  <text x="70" y="454" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Circuit topology</text>

  <!-- Confidence Levels -->
  <rect x="250" y="250" width="200" height="140" rx="8" fill="white" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow2)"/>
  <text x="350" y="275" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#334155">Confidence Levels</text>

  <rect x="270" y="295" width="60" height="20" rx="4" fill="#10B981"/>
  <text x="300" y="309" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">HIGH</text>
  <text x="340" y="309" font-family="system-ui, sans-serif" font-size="10" fill="#475569">All checkers pass first try</text>

  <rect x="270" y="325" width="60" height="20" rx="4" fill="#F59E0B"/>
  <text x="300" y="339" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">MEDIUM</text>
  <text x="340" y="339" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Reruns needed, all pass</text>

  <rect x="270" y="355" width="60" height="20" rx="4" fill="#EF4444"/>
  <text x="300" y="369" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">LOW</text>
  <text x="340" y="369" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Unresolved flags remain</text>

  <!-- Model Config -->
  <rect x="470" y="250" width="200" height="100" rx="8" fill="white" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow2)"/>
  <text x="570" y="275" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#334155">Model Configuration</text>

  <rect x="490" y="295" width="70" height="20" rx="4" fill="#D97706"/>
  <text x="525" y="309" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">Opus</text>
  <text x="575" y="309" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Orchestration</text>

  <rect x="490" y="320" width="70" height="20" rx="4" fill="#2563EB"/>
  <text x="525" y="334" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white">Sonnet</text>
  <text x="575" y="334" font-family="system-ui, sans-serif" font-size="10" fill="#475569">All subagents</text>
</svg>