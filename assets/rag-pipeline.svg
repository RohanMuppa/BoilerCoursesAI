<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400">
  <defs>
    <linearGradient id="ingestGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6"/>
      <stop offset="100%" style="stop-color:#2563EB"/>
    </linearGradient>
    <linearGradient id="queryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6"/>
      <stop offset="100%" style="stop-color:#7C3AED"/>
    </linearGradient>
    <linearGradient id="dbGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06B6D4"/>
      <stop offset="100%" style="stop-color:#0891B2"/>
    </linearGradient>
    <filter id="shadow3" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.12"/>
    </filter>
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#3B82F6"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#8B5CF6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="400" fill="#f8fafc"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="22" font-weight="700" fill="#1e293b">Local RAG Pipeline</text>
  <text x="450" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#64748b">Semantic search over 900+ page textbooks</text>

  <!-- Ingestion Flow (Top) -->
  <text x="100" y="90" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#3B82F6">INGESTION</text>

  <!-- PDF Input -->
  <rect x="30" y="110" width="100" height="70" rx="8" fill="white" stroke="#3B82F6" stroke-width="2" filter="url(#shadow3)"/>
  <text x="80" y="140" text-anchor="middle" font-family="system-ui, sans-serif" font-size="24" fill="#3B82F6">ðŸ“„</text>
  <text x="80" y="165" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#475569">PDF Textbook</text>

  <path d="M130 145 L170 145" stroke="#3B82F6" stroke-width="2" marker-end="url(#arrowBlue)"/>

  <!-- Chunking -->
  <rect x="180" y="110" width="100" height="70" rx="8" fill="url(#ingestGrad)" filter="url(#shadow3)"/>
  <text x="230" y="140" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white">Chunking</text>
  <text x="230" y="158" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)">400-600 chars</text>
  <text x="230" y="172" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)">~7 chunks/page</text>

  <path d="M280 145 L320 145" stroke="#3B82F6" stroke-width="2" marker-end="url(#arrowBlue)"/>

  <!-- Embedding -->
  <rect x="330" y="110" width="100" height="70" rx="8" fill="url(#ingestGrad)" filter="url(#shadow3)"/>
  <text x="380" y="140" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white">Embedding</text>
  <text x="380" y="158" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)">Xenova</text>
  <text x="380" y="172" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)">384 dimensions</text>

  <path d="M430 145 L470 145" stroke="#3B82F6" stroke-width="2" marker-end="url(#arrowBlue)"/>

  <!-- Vector DB -->
  <rect x="480" y="100" width="120" height="90" rx="8" fill="url(#dbGrad)" filter="url(#shadow3)"/>
  <text x="540" y="135" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="white">LanceDB</text>
  <text x="540" y="155" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Vector Database</text>
  <text x="540" y="175" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.7)">~6000 chunks</text>

  <!-- Query Flow (Bottom) -->
  <text x="100" y="240" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#8B5CF6">RETRIEVAL</text>

  <!-- User Query -->
  <rect x="30" y="260" width="100" height="70" rx="8" fill="white" stroke="#8B5CF6" stroke-width="2" filter="url(#shadow3)"/>
  <text x="80" y="290" text-anchor="middle" font-family="system-ui, sans-serif" font-size="24" fill="#8B5CF6">ðŸ’¬</text>
  <text x="80" y="315" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#475569">Your Question</text>

  <path d="M130 295 L170 295" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrowPurple)"/>

  <!-- Query Embedding -->
  <rect x="180" y="260" width="100" height="70" rx="8" fill="url(#queryGrad)" filter="url(#shadow3)"/>
  <text x="230" y="290" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white">Embed Query</text>
  <text x="230" y="308" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)">Same model</text>
  <text x="230" y="322" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)">384-dim vector</text>

  <path d="M280 295 L320 295" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrowPurple)"/>

  <!-- Similarity Search -->
  <rect x="330" y="260" width="100" height="70" rx="8" fill="url(#queryGrad)" filter="url(#shadow3)"/>
  <text x="380" y="285" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white">Similarity</text>
  <text x="380" y="300" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white">Search</text>
  <text x="380" y="318" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.8)">Cosine distance</text>

  <!-- Arrow to DB -->
  <path d="M380 260 L380 200 L480 165" stroke="#8B5CF6" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrowPurple)"/>

  <path d="M430 295 L470 295" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrowPurple)"/>

  <!-- Results -->
  <rect x="480" y="260" width="120" height="70" rx="8" fill="white" stroke="#8B5CF6" stroke-width="2" filter="url(#shadow3)"/>
  <text x="540" y="290" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#7C3AED">Top K Results</text>
  <text x="540" y="308" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">Ranked by score</text>
  <text x="540" y="322" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">0 = best match</text>

  <path d="M600 295 L640 295" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrowPurple)"/>

  <!-- Claude -->
  <rect x="650" y="250" width="120" height="90" rx="8" fill="#D97706" filter="url(#shadow3)"/>
  <text x="710" y="285" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="white">Claude</text>
  <text x="710" y="305" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.85)">Generates answer</text>
  <text x="710" y="325" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.7)">with context</text>

  <!-- Output -->
  <path d="M770 295 L810 295" stroke="#D97706" stroke-width="2"/>
  <rect x="820" y="260" width="60" height="70" rx="8" fill="white" stroke="#D97706" stroke-width="2" filter="url(#shadow3)"/>
  <text x="850" y="295" text-anchor="middle" font-family="system-ui, sans-serif" font-size="24" fill="#D97706">âœ¨</text>
  <text x="850" y="318" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#475569">Answer</text>

  <!-- Stats Box -->
  <rect x="650" y="100" width="220" height="90" rx="8" fill="white" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow3)"/>
  <text x="760" y="125" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#334155">Performance Stats</text>

  <text x="670" y="148" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">900 page PDF</text>
  <text x="820" y="148" text-anchor="end" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#334155">~6000 chunks</text>

  <text x="670" y="166" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Query time</text>
  <text x="820" y="166" text-anchor="end" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#334155">&lt;100ms</text>

  <text x="670" y="184" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Score range</text>
  <text x="820" y="184" text-anchor="end" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#334155">0.0 (best) to 1.0</text>

  <!-- Legend -->
  <rect x="30" y="365" width="12" height="12" rx="2" fill="url(#ingestGrad)"/>
  <text x="48" y="375" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Ingestion (one time)</text>

  <rect x="170" y="365" width="12" height="12" rx="2" fill="url(#queryGrad)"/>
  <text x="188" y="375" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Query (each search)</text>

  <rect x="310" y="365" width="12" height="12" rx="2" fill="url(#dbGrad)"/>
  <text x="328" y="375" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Vector storage</text>
</svg>