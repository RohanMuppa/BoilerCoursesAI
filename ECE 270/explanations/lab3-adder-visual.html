<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lab 3 Two-Bit Adder Interactive</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: #0a0a0a;
  color: #e0e0e0;
  font-family: 'Courier New', monospace;
  padding: 20px;
  overflow-x: hidden;
}
h1 { text-align: center; margin-bottom: 10px; color: #fff; font-size: 24px; }
.subtitle { text-align: center; margin-bottom: 30px; color: #888; font-size: 14px; }

.controls {
  display: flex;
  gap: 20px;
  justify-content: center;
  align-items: center;
  margin-bottom: 40px;
  flex-wrap: wrap;
}
.input-section { display: flex; gap: 10px; align-items: center; }
.label { color: #aaa; font-weight: bold; }
.btn {
  width: 50px;
  height: 50px;
  background: #1a1a2e;
  border: 3px solid #555;
  color: #888;
  font-family: 'Courier New', monospace;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  border-radius: 8px;
  transition: all 0.2s;
}
.btn.on {
  background: #00ff88;
  color: #000;
  border-color: #00ff88;
  box-shadow: 0 0 20px rgba(0,255,136,0.5);
}
.result {
  padding: 15px 30px;
  background: #1a1a2e;
  border: 2px solid #ff9f43;
  border-radius: 8px;
  font-size: 18px;
  font-weight: bold;
  color: #ff9f43;
}

.circuit {
  margin: 0 auto;
  max-width: 1400px;
}

svg { display: block; margin: 0 auto; }

.wire {
  stroke: #333;
  stroke-width: 2;
  fill: none;
  transition: stroke 0.3s;
}
.wire.active {
  stroke: #00ff88;
  stroke-width: 3;
  filter: drop-shadow(0 0 4px #00ff88);
}

.gate {
  fill: #1a1a2e;
  stroke: #4a9eff;
  stroke-width: 2;
  transition: fill 0.3s;
}
.gate.active {
  fill: #2a4a6e;
}

.gate-label {
  fill: #4a9eff;
  font-size: 12px;
  font-weight: bold;
  text-anchor: middle;
  pointer-events: none;
}

.io-label {
  font-size: 13px;
  font-weight: bold;
  fill: #888;
  transition: fill 0.3s;
}
.io-label.active { fill: #00ff88; }

.led {
  fill: #2a2a2a;
  stroke: #555;
  stroke-width: 2;
  transition: fill 0.3s;
}
.led.on {
  fill: #ff9f43;
  filter: drop-shadow(0 0 8px #ff9f43);
}

.section-label {
  fill: #aaa;
  font-size: 14px;
  font-weight: bold;
}
</style>
</head>
<body>

<h1>Two-Bit Ripple Carry Adder</h1>
<p class="subtitle">Click buttons to set inputs and watch the signal propagate through gates</p>

<div class="controls">
  <div class="input-section">
    <span class="label">A:</span>
    <button class="btn" id="a1">A1</button>
    <button class="btn" id="a0">A0</button>
  </div>
  <div class="input-section">
    <span class="label">B:</span>
    <button class="btn" id="b1">B1</button>
    <button class="btn" id="b0">B0</button>
  </div>
  <div class="result" id="result">0 + 0 = 0</div>
</div>

<div class="circuit">
<svg width="1200" height="600" viewBox="0 0 1200 600">

  <!-- FULL ADDER 0 -->
  <text x="250" y="30" class="section-label">Full Adder 0 (ones place)</text>

  <!-- Inputs A0, B0 -->
  <text x="20" y="85" class="io-label" id="lbl-a0">A0</text>
  <text x="20" y="145" class="io-label" id="lbl-b0">B0</text>
  <text x="20" y="380" class="io-label" id="lbl-cin0">Cin0=0</text>

  <!-- Input wires -->
  <line x1="50" y1="80" x2="120" y2="80" class="wire" id="w-a0-xor1-0"/>
  <line x1="50" y1="140" x2="120" y2="100" class="wire" id="w-b0-xor1-0"/>

  <!-- A0, B0 to NAND1 -->
  <line x1="50" y1="80" x2="80" y2="80" class="wire" id="w-a0-split"/>
  <line x1="80" y1="80" x2="80" y2="280" class="wire" id="w-a0-down"/>
  <line x1="80" y1="280" x2="120" y2="280" class="wire" id="w-a0-nand1-0"/>

  <line x1="50" y1="140" x2="100" y2="140" class="wire" id="w-b0-split"/>
  <line x1="100" y1="140" x2="100" y2="300" class="wire" id="w-b0-down"/>
  <line x1="100" y1="300" x2="120" y2="300" class="wire" id="w-b0-nand1-0"/>

  <!-- XOR1 gate -->
  <rect x="120" y="60" width="80" height="60" rx="8" class="gate" id="g-xor1-0"/>
  <text x="160" y="95" class="gate-label">XOR</text>

  <!-- XOR1 output -->
  <line x1="200" y1="90" x2="240" y2="90" class="wire" id="w-xor1-0-out"/>
  <line x1="240" y1="90" x2="240" y2="200" class="wire" id="w-xor1-0-split"/>
  <line x1="240" y1="200" x2="280" y2="200" class="wire" id="w-xor1-0-xor2"/>
  <line x1="240" y1="90" x2="280" y2="170" class="wire" id="w-xor1-0-xor2-top"/>

  <!-- Cin0 wires -->
  <line x1="50" y1="375" x2="220" y2="375" class="wire" id="w-cin0-main"/>
  <line x1="220" y1="375" x2="220" y2="190" class="wire" id="w-cin0-up"/>
  <line x1="220" y1="190" x2="280" y2="190" class="wire" id="w-cin0-xor2"/>
  <line x1="220" y1="375" x2="220" y2="320" class="wire" id="w-cin0-nand2"/>
  <line x1="220" y1="320" x2="280" y2="320" class="wire" id="w-cin0-nand2-in"/>

  <!-- XOR2 gate -->
  <rect x="280" y="160" width="80" height="60" rx="8" class="gate" id="g-xor2-0"/>
  <text x="320" y="195" class="gate-label">XOR</text>

  <!-- S0 output -->
  <line x1="360" y1="190" x2="430" y2="190" class="wire" id="w-s0-out"/>
  <circle cx="450" cy="190" r="12" class="led" id="led-s0"/>
  <text x="480" y="195" class="io-label" id="lbl-s0">S0</text>

  <!-- NAND1 gate -->
  <rect x="120" y="260" width="80" height="60" rx="8" class="gate" id="g-nand1-0"/>
  <text x="160" y="295" class="gate-label">NAND</text>

  <!-- NAND2 gate -->
  <line x1="240" y1="340" x2="280" y2="340" class="wire" id="w-xor1-0-nand2"/>
  <line x1="240" y1="200" x2="240" y2="340" class="wire" id="w-xor1-0-down-nand2"/>

  <rect x="280" y="300" width="80" height="60" rx="8" class="gate" id="g-nand2-0"/>
  <text x="320" y="335" class="gate-label">NAND</text>

  <!-- NAND outputs to NAND3 -->
  <line x1="200" y1="290" x2="230" y2="290" class="wire" id="w-nand1-0-out"/>
  <line x1="230" y1="290" x2="230" y2="440" class="wire" id="w-nand1-0-down"/>
  <line x1="230" y1="440" x2="360" y2="440" class="wire" id="w-nand1-0-nand3"/>

  <line x1="360" y1="330" x2="380" y2="330" class="wire" id="w-nand2-0-out"/>
  <line x1="380" y1="330" x2="380" y2="420" class="wire" id="w-nand2-0-down"/>
  <line x1="380" y1="420" x2="400" y2="420" class="wire" id="w-nand2-0-nand3-top"/>
  <line x1="380" y1="440" x2="400" y2="440" class="wire" id="w-nand2-0-nand3-bot"/>

  <!-- NAND3 gate (final carry) -->
  <rect x="400" y="400" width="80" height="60" rx="8" class="gate" id="g-nand3-0"/>
  <text x="440" y="435" class="gate-label">NAND</text>

  <!-- Cout0 output -->
  <line x1="480" y1="430" x2="550" y2="430" class="wire" id="w-cout0-out"/>
  <text x="570" y="435" class="io-label" id="lbl-cout0">Cout0</text>


  <!-- FULL ADDER 1 -->
  <text x="850" y="30" class="section-label">Full Adder 1 (twos place)</text>

  <!-- Carry chain -->
  <line x1="550" y1="430" x2="620" y2="430" class="wire" id="w-carry-chain"/>
  <line x1="620" y1="430" x2="620" y2="375" class="wire" id="w-carry-up"/>

  <!-- Inputs A1, B1, Cin1 -->
  <text x="620" y="85" class="io-label" id="lbl-a1">A1</text>
  <text x="620" y="145" class="io-label" id="lbl-b1">B1</text>
  <text x="570" y="380" class="io-label" id="lbl-cin1">Cin1</text>

  <line x1="650" y1="80" x2="720" y2="80" class="wire" id="w-a1-xor1-1"/>
  <line x1="650" y1="140" x2="720" y2="100" class="wire" id="w-b1-xor1-1"/>

  <line x1="650" y1="80" x2="680" y2="80" class="wire" id="w-a1-split"/>
  <line x1="680" y1="80" x2="680" y2="280" class="wire" id="w-a1-down"/>
  <line x1="680" y1="280" x2="720" y2="280" class="wire" id="w-a1-nand1-1"/>

  <line x1="650" y1="140" x2="700" y2="140" class="wire" id="w-b1-split"/>
  <line x1="700" y1="140" x2="700" y2="300" class="wire" id="w-b1-down"/>
  <line x1="700" y1="300" x2="720" y2="300" class="wire" id="w-b1-nand1-1"/>

  <!-- XOR1 gate -->
  <rect x="720" y="60" width="80" height="60" rx="8" class="gate" id="g-xor1-1"/>
  <text x="760" y="95" class="gate-label">XOR</text>

  <line x1="800" y1="90" x2="840" y2="90" class="wire" id="w-xor1-1-out"/>
  <line x1="840" y1="90" x2="840" y2="200" class="wire" id="w-xor1-1-split"/>
  <line x1="840" y1="200" x2="880" y2="200" class="wire" id="w-xor1-1-xor2"/>
  <line x1="840" y1="90" x2="880" y2="170" class="wire" id="w-xor1-1-xor2-top"/>

  <!-- Cin1 wires -->
  <line x1="620" y1="375" x2="820" y2="375" class="wire" id="w-cin1-main"/>
  <line x1="820" y1="375" x2="820" y2="190" class="wire" id="w-cin1-up"/>
  <line x1="820" y1="190" x2="880" y2="190" class="wire" id="w-cin1-xor2"/>
  <line x1="820" y1="375" x2="820" y2="320" class="wire" id="w-cin1-nand2"/>
  <line x1="820" y1="320" x2="880" y2="320" class="wire" id="w-cin1-nand2-in"/>

  <!-- XOR2 gate -->
  <rect x="880" y="160" width="80" height="60" rx="8" class="gate" id="g-xor2-1"/>
  <text x="920" y="195" class="gate-label">XOR</text>

  <!-- S1 output -->
  <line x1="960" y1="190" x2="1030" y2="190" class="wire" id="w-s1-out"/>
  <circle cx="1050" cy="190" r="12" class="led" id="led-s1"/>
  <text x="1080" y="195" class="io-label" id="lbl-s1">S1</text>

  <!-- NAND1 gate -->
  <rect x="720" y="260" width="80" height="60" rx="8" class="gate" id="g-nand1-1"/>
  <text x="760" y="295" class="gate-label">NAND</text>

  <!-- NAND2 gate -->
  <line x1="840" y1="340" x2="880" y2="340" class="wire" id="w-xor1-1-nand2"/>
  <line x1="840" y1="200" x2="840" y2="340" class="wire" id="w-xor1-1-down-nand2"/>

  <rect x="880" y="300" width="80" height="60" rx="8" class="gate" id="g-nand2-1"/>
  <text x="920" y="335" class="gate-label">NAND</text>

  <!-- NAND outputs to NAND3 -->
  <line x1="800" y1="290" x2="830" y2="290" class="wire" id="w-nand1-1-out"/>
  <line x1="830" y1="290" x2="830" y2="440" class="wire" id="w-nand1-1-down"/>
  <line x1="830" y1="440" x2="960" y2="440" class="wire" id="w-nand1-1-nand3"/>

  <line x1="960" y1="330" x2="980" y2="330" class="wire" id="w-nand2-1-out"/>
  <line x1="980" y1="330" x2="980" y2="420" class="wire" id="w-nand2-1-down"/>
  <line x1="980" y1="420" x2="1000" y2="420" class="wire" id="w-nand2-1-nand3-top"/>
  <line x1="980" y1="440" x2="1000" y2="440" class="wire" id="w-nand2-1-nand3-bot"/>

  <!-- NAND3 gate -->
  <rect x="1000" y="400" width="80" height="60" rx="8" class="gate" id="g-nand3-1"/>
  <text x="1040" y="435" class="gate-label">NAND</text>

  <!-- S2 output -->
  <line x1="1080" y1="430" x2="1150" y2="430" class="wire" id="w-s2-out"/>
  <circle cx="1170" cy="430" r="12" class="led" id="led-s2"/>
  <text x="1190" y="435" class="io-label" id="lbl-s2">S2</text>

</svg>
</div>

<script>
const state = { a1: 0, a0: 0, b1: 0, b0: 0 };

function xor(a, b) { return a ^ b; }
function nand(a, b) { return (a & b) ? 0 : 1; }

function compute() {
  const { a1, a0, b1, b0 } = state;

  // Adder 0
  const xor1_0 = xor(a0, b0);
  const s0 = xor(xor1_0, 0);
  const nand1_0 = nand(a0, b0);
  const nand2_0 = nand(xor1_0, 0);
  const cout0 = nand(nand1_0, nand2_0);

  // Adder 1
  const xor1_1 = xor(a1, b1);
  const s1 = xor(xor1_1, cout0);
  const nand1_1 = nand(a1, b1);
  const nand2_1 = nand(xor1_1, cout0);
  const s2 = nand(nand1_1, nand2_1);

  const valA = a1 * 2 + a0;
  const valB = b1 * 2 + b0;
  const sum = s2 * 4 + s1 * 2 + s0;

  document.getElementById('result').textContent = `${valA} + ${valB} = ${sum}`;

  // Update LEDs
  document.getElementById('led-s0').classList.toggle('on', s0);
  document.getElementById('led-s1').classList.toggle('on', s1);
  document.getElementById('led-s2').classList.toggle('on', s2);

  // Update wires and gates
  updateVisuals({ a0, b0, a1, b1, xor1_0, s0, nand1_0, nand2_0, cout0, xor1_1, s1, nand1_1, nand2_1, s2 });
}

function updateVisuals(v) {
  const allWires = document.querySelectorAll('.wire');
  const allGates = document.querySelectorAll('.gate');
  const allLabels = document.querySelectorAll('.io-label');

  allWires.forEach(w => w.classList.remove('active'));
  allGates.forEach(g => g.classList.remove('active'));
  allLabels.forEach(l => l.classList.remove('active'));

  // Adder 0 input wires
  if (v.a0) {
    activate('w-a0-xor1-0', 'w-a0-split', 'w-a0-down', 'w-a0-nand1-0', 'lbl-a0');
  }
  if (v.b0) {
    activate('w-b0-xor1-0', 'w-b0-split', 'w-b0-down', 'w-b0-nand1-0', 'lbl-b0');
  }

  // XOR1-0
  if (v.a0 || v.b0) activate('g-xor1-0');
  if (v.xor1_0) {
    activate('w-xor1-0-out', 'w-xor1-0-split', 'w-xor1-0-xor2', 'w-xor1-0-xor2-top', 'w-xor1-0-nand2', 'w-xor1-0-down-nand2');
  }

  // Cin0 always 0

  // XOR2-0
  activate('g-xor2-0');
  if (v.s0) {
    activate('w-s0-out', 'lbl-s0');
  }

  // NAND1-0
  if (v.a0 || v.b0) activate('g-nand1-0');
  if (v.nand1_0) {
    activate('w-nand1-0-out', 'w-nand1-0-down', 'w-nand1-0-nand3');
  }

  // NAND2-0
  activate('g-nand2-0');
  if (v.nand2_0) {
    activate('w-nand2-0-out', 'w-nand2-0-down', 'w-nand2-0-nand3-top', 'w-nand2-0-nand3-bot');
  }

  // NAND3-0
  if (v.nand1_0 || v.nand2_0) activate('g-nand3-0');
  if (v.cout0) {
    activate('w-cout0-out', 'lbl-cout0', 'w-carry-chain', 'w-carry-up', 'w-cin1-main', 'w-cin1-up', 'w-cin1-xor2', 'w-cin1-nand2', 'w-cin1-nand2-in', 'lbl-cin1');
  }

  // Adder 1
  if (v.a1) {
    activate('w-a1-xor1-1', 'w-a1-split', 'w-a1-down', 'w-a1-nand1-1', 'lbl-a1');
  }
  if (v.b1) {
    activate('w-b1-xor1-1', 'w-b1-split', 'w-b1-down', 'w-b1-nand1-1', 'lbl-b1');
  }

  if (v.a1 || v.b1) activate('g-xor1-1');
  if (v.xor1_1) {
    activate('w-xor1-1-out', 'w-xor1-1-split', 'w-xor1-1-xor2', 'w-xor1-1-xor2-top', 'w-xor1-1-nand2', 'w-xor1-1-down-nand2');
  }

  activate('g-xor2-1');
  if (v.s1) {
    activate('w-s1-out', 'lbl-s1');
  }

  if (v.a1 || v.b1) activate('g-nand1-1');
  if (v.nand1_1) {
    activate('w-nand1-1-out', 'w-nand1-1-down', 'w-nand1-1-nand3');
  }

  activate('g-nand2-1');
  if (v.nand2_1) {
    activate('w-nand2-1-out', 'w-nand2-1-down', 'w-nand2-1-nand3-top', 'w-nand2-1-nand3-bot');
  }

  if (v.nand1_1 || v.nand2_1) activate('g-nand3-1');
  if (v.s2) {
    activate('w-s2-out', 'lbl-s2');
  }
}

function activate(...ids) {
  ids.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.classList.add('active');
  });
}

['a0', 'a1', 'b0', 'b1'].forEach(id => {
  const btn = document.getElementById(id);
  btn.addEventListener('click', () => {
    state[id] = state[id] ? 0 : 1;
    btn.classList.toggle('on', state[id]);
    compute();
  });
});

compute();
</script>

</body>
</html>
